/*!
 * expBuild v1.0.41
 * (c) 2018-2021 yuda-lyu(semisphere)
 * Released under the MIT License.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("fs"),require("puppeteer")):"function"==typeof define&&define.amd?define(["fs","puppeteer"],e):(t="undefined"!=typeof globalThis?globalThis:t||self).expBuild=e(t.fs,t.puppeteer)}(this,(function(t,e){"use strict";var r=Array.isArray,n="object"==typeof global&&global&&global.Object===Object&&global,o="object"==typeof self&&self&&self.Object===Object&&self,i=n||o||Function("return this")(),a=i.Symbol,u=Object.prototype,c=u.hasOwnProperty,l=u.toString,s=a?a.toStringTag:void 0;var f=Object.prototype.toString;var p="[object Null]",h="[object Undefined]",v=a?a.toStringTag:void 0;function y(t){return null==t?void 0===t?h:p:v&&v in Object(t)?function(t){var e=c.call(t,s),r=t[s];try{t[s]=void 0;var n=!0}catch(t){}var o=l.call(t);return n&&(e?t[s]=r:delete t[s]),o}(t):function(t){return f.call(t)}(t)}function w(t){return null!=t&&"object"==typeof t}var d="[object Symbol]";function b(t){return"symbol"==typeof t||w(t)&&y(t)==d}var g=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,j=/^\w*$/;function m(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var _="[object AsyncFunction]",x="[object Function]",O="[object GeneratorFunction]",F="[object Proxy]";function k(t){if(!m(t))return!1;var e=y(t);return e==x||e==O||e==_||e==F}var S,A=i["__core-js_shared__"],$=(S=/[^.]+$/.exec(A&&A.keys&&A.keys.IE_PROTO||""))?"Symbol(src)_1."+S:"";var P=Function.prototype.toString;function C(t){if(null!=t){try{return P.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var z=/^\[object .+?Constructor\]$/,E=Function.prototype,B=Object.prototype,T=E.toString,M=B.hasOwnProperty,N=RegExp("^"+T.call(M).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function I(t){return!(!m(t)||(e=t,$&&$ in e))&&(k(t)?N:z).test(C(t));var e}function L(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return I(r)?r:void 0}var U=L(Object,"create");var R=Object.prototype.hasOwnProperty;var V=Object.prototype.hasOwnProperty;function q(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function D(t,e){for(var r,n,o=t.length;o--;)if((r=t[o][0])===(n=e)||r!=r&&n!=n)return o;return-1}q.prototype.clear=function(){this.__data__=U?U(null):{},this.size=0},q.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},q.prototype.get=function(t){var e=this.__data__;if(U){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return R.call(e,t)?e[t]:void 0},q.prototype.has=function(t){var e=this.__data__;return U?void 0!==e[t]:V.call(e,t)},q.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=U&&void 0===e?"__lodash_hash_undefined__":e,this};var W=Array.prototype.splice;function G(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}G.prototype.clear=function(){this.__data__=[],this.size=0},G.prototype.delete=function(t){var e=this.__data__,r=D(e,t);return!(r<0)&&(r==e.length-1?e.pop():W.call(e,r,1),--this.size,!0)},G.prototype.get=function(t){var e=this.__data__,r=D(e,t);return r<0?void 0:e[r][1]},G.prototype.has=function(t){return D(this.__data__,t)>-1},G.prototype.set=function(t,e){var r=this.__data__,n=D(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};var H=L(i,"Map");function J(t,e){var r,n,o=t.__data__;return("string"==(n=typeof(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof e?"string":"hash"]:o.map}function K(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}K.prototype.clear=function(){this.size=0,this.__data__={hash:new q,map:new(H||G),string:new q}},K.prototype.delete=function(t){var e=J(this,t).delete(t);return this.size-=e?1:0,e},K.prototype.get=function(t){return J(this,t).get(t)},K.prototype.has=function(t){return J(this,t).has(t)},K.prototype.set=function(t,e){var r=J(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};var Q="Expected a function";function X(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(Q);var r=function(){var n=arguments,o=e?e.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=t.apply(this,n);return r.cache=i.set(o,a)||i,a};return r.cache=new(X.Cache||K),r}X.Cache=K;var Y,Z,tt,et=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,rt=/\\(\\)?/g,nt=(Y=function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(et,(function(t,r,n,o){e.push(n?o.replace(rt,"$1"):r||t)})),e},Z=X(Y,(function(t){return 500===tt.size&&tt.clear(),t})),tt=Z.cache,Z),ot=nt;function it(t,e){for(var r=-1,n=null==t?0:t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}var at=1/0,ut=a?a.prototype:void 0,ct=ut?ut.toString:void 0;function lt(t){if("string"==typeof t)return t;if(r(t))return it(t,lt)+"";if(b(t))return ct?ct.call(t):"";var e=t+"";return"0"==e&&1/t==-at?"-0":e}function st(t){return null==t?"":lt(t)}function ft(t,e){return r(t)?t:function(t,e){if(r(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!b(t))||j.test(t)||!g.test(t)||null!=e&&t in Object(e)}(t,e)?[t]:ot(st(t))}var pt=1/0;function ht(t){if("string"==typeof t||b(t))return t;var e=t+"";return"0"==e&&1/t==-pt?"-0":e}function vt(t,e,r){var n=null==t?void 0:function(t,e){for(var r=0,n=(e=ft(e,t)).length;null!=t&&r<n;)t=t[ht(e[r++])];return r&&r==n?t:void 0}(t,e);return void 0===n?r:n}var yt=/\s/;var wt=/^\s+/;function dt(t){return t?t.slice(0,function(t){for(var e=t.length;e--&&yt.test(t.charAt(e)););return e}(t)+1).replace(wt,""):t}var bt=NaN,gt=/^[-+]0x[0-9a-f]+$/i,jt=/^0b[01]+$/i,mt=/^0o[0-7]+$/i,_t=parseInt;function xt(t){if("number"==typeof t)return t;if(b(t))return bt;if(m(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=m(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=dt(t);var r=jt.test(t);return r||mt.test(t)?_t(t.slice(2),r?2:8):gt.test(t)?bt:+t}var Ot=1/0,Ft=17976931348623157e292;function kt(t){return t?(t=xt(t))===Ot||t===-Ot?(t<0?-1:1)*Ft:t==t?t:0:0===t?t:0}function St(t){var e=kt(t),r=e%1;return e==e?r?e-r:e:0}function At(t){return"[object String]"===Object.prototype.toString.call(t)}function $t(t){return t!=t}function Pt(t){let e=!1;if(function(t){return!(!At(t)||""===t)}(t))e=!isNaN(Number(t));else if(function(t){return"[object Number]"===Object.prototype.toString.call(t)}(t)){if($t(t))return!1;e=!0}return e}function Ct(t){if(!Pt(t))return 0;return kt(t)}function zt(t){return!!Pt(t)&&(t=Ct(t),"number"==typeof(e=t)&&e==St(e));var e}var Et=i.isFinite,Bt=Math.min;var Tt=function(t){var e=Math[t];return function(t,r){if(t=xt(t),(r=null==r?0:Bt(St(r),292))&&Et(t)){var n=(st(t)+"e").split("e");return+((n=(st(e(n[0]+"e"+(+n[1]+r)))+"e").split("e"))[0]+"e"+(+n[1]-r))}return e(t)}}("round"),Mt=Tt;function Nt(t){if(!Pt(t))return 0;t=Ct(t);let e=Mt(t);return"0"===String(e)?0:e}function It(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t}var Lt,Ut=function(t,e,r){for(var n=-1,o=Object(t),i=r(t),a=i.length;a--;){var u=i[Lt?a:++n];if(!1===e(o[u],u,o))break}return t},Rt=Ut;function Vt(t){return w(t)&&"[object Arguments]"==y(t)}var qt=Object.prototype,Dt=qt.hasOwnProperty,Wt=qt.propertyIsEnumerable,Gt=Vt(function(){return arguments}())?Vt:function(t){return w(t)&&Dt.call(t,"callee")&&!Wt.call(t,"callee")},Ht=Gt;var Jt="object"==typeof exports&&exports&&!exports.nodeType&&exports,Kt=Jt&&"object"==typeof module&&module&&!module.nodeType&&module,Qt=Kt&&Kt.exports===Jt?i.Buffer:void 0,Xt=(Qt?Qt.isBuffer:void 0)||function(){return!1},Yt=9007199254740991,Zt=/^(?:0|[1-9]\d*)$/;function te(t,e){var r=typeof t;return!!(e=null==e?Yt:e)&&("number"==r||"symbol"!=r&&Zt.test(t))&&t>-1&&t%1==0&&t<e}var ee=9007199254740991;function re(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=ee}var ne={};ne["[object Float32Array]"]=ne["[object Float64Array]"]=ne["[object Int8Array]"]=ne["[object Int16Array]"]=ne["[object Int32Array]"]=ne["[object Uint8Array]"]=ne["[object Uint8ClampedArray]"]=ne["[object Uint16Array]"]=ne["[object Uint32Array]"]=!0,ne["[object Arguments]"]=ne["[object Array]"]=ne["[object ArrayBuffer]"]=ne["[object Boolean]"]=ne["[object DataView]"]=ne["[object Date]"]=ne["[object Error]"]=ne["[object Function]"]=ne["[object Map]"]=ne["[object Number]"]=ne["[object Object]"]=ne["[object RegExp]"]=ne["[object Set]"]=ne["[object String]"]=ne["[object WeakMap]"]=!1;var oe="object"==typeof exports&&exports&&!exports.nodeType&&exports,ie=oe&&"object"==typeof module&&module&&!module.nodeType&&module,ae=ie&&ie.exports===oe&&n.process,ue=function(){try{var t=ie&&ie.require&&ie.require("util").types;return t||ae&&ae.binding&&ae.binding("util")}catch(t){}}(),ce=ue&&ue.isTypedArray,le=ce?function(t){return function(e){return t(e)}}(ce):function(t){return w(t)&&re(t.length)&&!!ne[y(t)]},se=le,fe=Object.prototype.hasOwnProperty;function pe(t,e){var n=r(t),o=!n&&Ht(t),i=!n&&!o&&Xt(t),a=!n&&!o&&!i&&se(t),u=n||o||i||a,c=u?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],l=c.length;for(var s in t)!e&&!fe.call(t,s)||u&&("length"==s||i&&("offset"==s||"parent"==s)||a&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||te(s,l))||c.push(s);return c}var he=Object.prototype;var ve=function(t,e){return function(r){return t(e(r))}}(Object.keys,Object),ye=ve,we=Object.prototype.hasOwnProperty;function de(t){if(r=(e=t)&&e.constructor,e!==("function"==typeof r&&r.prototype||he))return ye(t);var e,r,n=[];for(var o in Object(t))we.call(t,o)&&"constructor"!=o&&n.push(o);return n}function be(t){return null!=t&&re(t.length)&&!k(t)}function ge(t){return be(t)?pe(t):de(t)}var je=function(t,e){return function(r,n){if(null==r)return r;if(!be(r))return t(r,n);for(var o=r.length,i=e?o:-1,a=Object(r);(e?i--:++i<o)&&!1!==n(a[i],i,a););return r}}((function(t,e){return t&&Rt(t,e,ge)})),me=je;function _e(t){return t}function xe(t,e){var n;return(r(t)?It:me)(t,"function"==typeof(n=e)?n:_e)}var Oe=L(i,"DataView"),Fe=L(i,"Promise"),ke=L(i,"Set"),Se=L(i,"WeakMap"),Ae="[object Map]",$e="[object Promise]",Pe="[object Set]",Ce="[object WeakMap]",ze="[object DataView]",Ee=C(Oe),Be=C(H),Te=C(Fe),Me=C(ke),Ne=C(Se),Ie=y;(Oe&&Ie(new Oe(new ArrayBuffer(1)))!=ze||H&&Ie(new H)!=Ae||Fe&&Ie(Fe.resolve())!=$e||ke&&Ie(new ke)!=Pe||Se&&Ie(new Se)!=Ce)&&(Ie=function(t){var e=y(t),r="[object Object]"==e?t.constructor:void 0,n=r?C(r):"";if(n)switch(n){case Ee:return ze;case Be:return Ae;case Te:return $e;case Me:return Pe;case Ne:return Ce}return e});var Le=Ie,Ue="[object String]";var Re,Ve=(Re="length",function(t){return null==t?void 0:t[Re]}),qe=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var De="\\ud800-\\udfff",We="["+De+"]",Ge="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",He="\\ud83c[\\udffb-\\udfff]",Je="[^"+De+"]",Ke="(?:\\ud83c[\\udde6-\\uddff]){2}",Qe="[\\ud800-\\udbff][\\udc00-\\udfff]",Xe="(?:"+Ge+"|"+He+")"+"?",Ye="[\\ufe0e\\ufe0f]?",Ze=Ye+Xe+("(?:\\u200d(?:"+[Je,Ke,Qe].join("|")+")"+Ye+Xe+")*"),tr="(?:"+[Je+Ge+"?",Ge,Ke,Qe,We].join("|")+")",er=RegExp(He+"(?="+He+")|"+tr+Ze,"g");function rr(t){return function(t){return qe.test(t)}(t)?function(t){for(var e=er.lastIndex=0;er.test(t);)++e;return e}(t):Ve(t)}var nr="[object Map]",or="[object Set]";function ir(t){if(null==t)return 0;if(be(t))return"string"==typeof(e=t)||!r(e)&&w(e)&&y(e)==Ue?rr(t):t.length;var e,n=Le(t);return n==nr||n==or?t.size:de(t).length}function ar(t){return null==t?[]:function(t,e){return it(e,(function(e){return t[e]}))}(t,ge(t))}function ur(){let t,e,r=new Promise((function(){t=arguments[0],e=arguments[1]}));return r.resolve=t,r.reject=e,r}function cr(t){return"[object Array]"===Object.prototype.toString.call(t)}function lr(t){return"[object Object]"===Object.prototype.toString.call(t)}function sr(t){let e=Object.prototype.toString.call(t);return"[object Function]"===e||"[object AsyncFunction]"===e}var fr={};!function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}function o(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function i(t,e,n,i,a){if("function"!=typeof n)throw new TypeError("The listener must be a function");var u=new o(n,i||t,a),c=r?r+e:e;return t._events[c]?t._events[c].fn?t._events[c]=[t._events[c],u]:t._events[c].push(u):(t._events[c]=u,t._eventsCount++),t}function a(t,e){0==--t._eventsCount?t._events=new n:delete t._events[e]}function u(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),u.prototype.eventNames=function(){var t,n,o=[];if(0===this._eventsCount)return o;for(n in t=this._events)e.call(t,n)&&o.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(t)):o},u.prototype.listeners=function(t){var e=r?r+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var o=0,i=n.length,a=new Array(i);o<i;o++)a[o]=n[o].fn;return a},u.prototype.listenerCount=function(t){var e=r?r+t:t,n=this._events[e];return n?n.fn?1:n.length:0},u.prototype.emit=function(t,e,n,o,i,a){var u=r?r+t:t;if(!this._events[u])return!1;var c,l,s=this._events[u],f=arguments.length;if(s.fn){switch(s.once&&this.removeListener(t,s.fn,void 0,!0),f){case 1:return s.fn.call(s.context),!0;case 2:return s.fn.call(s.context,e),!0;case 3:return s.fn.call(s.context,e,n),!0;case 4:return s.fn.call(s.context,e,n,o),!0;case 5:return s.fn.call(s.context,e,n,o,i),!0;case 6:return s.fn.call(s.context,e,n,o,i,a),!0}for(l=1,c=new Array(f-1);l<f;l++)c[l-1]=arguments[l];s.fn.apply(s.context,c)}else{var p,h=s.length;for(l=0;l<h;l++)switch(s[l].once&&this.removeListener(t,s[l].fn,void 0,!0),f){case 1:s[l].fn.call(s[l].context);break;case 2:s[l].fn.call(s[l].context,e);break;case 3:s[l].fn.call(s[l].context,e,n);break;case 4:s[l].fn.call(s[l].context,e,n,o);break;default:if(!c)for(p=1,c=new Array(f-1);p<f;p++)c[p-1]=arguments[p];s[l].fn.apply(s[l].context,c)}}return!0},u.prototype.on=function(t,e,r){return i(this,t,e,r,!1)},u.prototype.once=function(t,e,r){return i(this,t,e,r,!0)},u.prototype.removeListener=function(t,e,n,o){var i=r?r+t:t;if(!this._events[i])return this;if(!e)return a(this,i),this;var u=this._events[i];if(u.fn)u.fn!==e||o&&!u.once||n&&u.context!==n||a(this,i);else{for(var c=0,l=[],s=u.length;c<s;c++)(u[c].fn!==e||o&&!u[c].once||n&&u[c].context!==n)&&l.push(u[c]);l.length?this._events[i]=1===l.length?l[0]:l:a(this,i)}return this},u.prototype.removeAllListeners=function(t){var e;return t?(e=r?r+t:t,this._events[e]&&a(this,e)):(this._events=new n,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=r,u.EventEmitter=u,t.exports=u}({get exports(){return fr},set exports(t){fr=t}});var pr=fr;function hr(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=0,r=[];var n;zt(n=t)&&Nt(n)<0&&(t=0),t=Nt(t);let o=new pr;return o.get=function(){if(r.length>0){return e+=1,r.splice(0,1)[0]}return null},o.cb=function(){e-=1,e<0&&(e=0),r.length>0&&o.emit("message",r)},o.push=function(n){r.push(n),(t<=0||e<t)&&o.emit("message",r)},o.clear=function(){e=0,r=[]},o}var vr="[object Boolean]";function yr(t){return!0===(e=t)||!1===e||w(e)&&y(e)==vr;var e}function wr(t){return!!function(t){return"[object Undefined]"===Object.prototype.toString.call(t)}(t)||(!!function(t){return"[object Null]"===Object.prototype.toString.call(t)}(t)||(!!function(t){if(lr(t)){for(let e in t)return!1;return!0}return!1}(t)||(!!function(t){return!(!At(t)||""!==t)}(t)||(!!function(t){return!!cr(t)&&0===t.length}(t)||!!$t(t)))))}function dr(t,e,r){var n=null==t?0:t.length;return n?function(t,e,r){var n=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(r=r>o?o:r)<0&&(r+=o),o=e>r?0:r-e>>>0,e>>>=0;for(var i=Array(o);++n<o;)i[n]=t[n+e];return i}(t,(e=r||void 0===e?1:St(e))<0?0:e,n):[]}async function br(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=vt(r,"headless");yr(n)||(n=!0);let o=vt(r,"viewport");lr(o)||(o={x:0,y:0,width:800,height:600});let i=vt(r,"actions");cr(i)||(i=[]);let a=vt(r,"waitsec");zt(a)||(a=5);let u={headless:n,slowMo:20},c=await e.launch(u),l=await c.newPage();async function s(t){let e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(r=Nt(r),0===r){if(e=await l.$(t),wr(e))return console.log("page.$ get no result: "+t),null}else{let n=await l.$$(t);if(0===n.length)return console.log("page.$$ get no result: "+t),null;e=r<0?n[n.length+r]:n[r]}if(wr(e))return console.log("invalid ele: "+t),null;if(wr(e.boundingBox))return console.log("invalid ele.boundingBox: "+t),null;let n=await e.boundingBox();return n.cx=n.x+n.width/2,n.cy=n.y+n.height/2,n.ele=e,n}await l.goto(t),await l.setViewport(o),await l.waitFor(1e3*a),await function(t,e){let r=ur();if(!cr(t)&&!lr(t))return r.reject("rs is not an array or object"),r;let n=!1;if(lr(t)){n=!0;let e=[];xe(t,((t,r)=>{e.push({k:r,v:t})})),t=e}sr(e)||(e=function(t){return t});let o=-1,i=[];return t.reduce((function(t,r){return t.then((function(t){i.push(t),o+=1;let a=o,u=r;return n&&(a=r.k,u=r.v),sr(e)?e(u,a):u}))}),Promise.resolve()).then((function(t){i.push(t),i=dr(i),r.resolve(i)})).catch((function(t){r.reject(t)})),r}(i,(async function(t){if("wait"===t.mode)await l.waitFor(t.time);else if("resize"===t.mode)await l.waitFor(300),await l.setViewport({x:0,y:0,width:t.width,height:t.height}),await l.waitFor(300);else if("move"===t.mode)await l.waitFor(300),await l.mouse.move(t.x1,t.y1),await l.waitFor(300);else if("elemove"===t.mode){await l.waitFor(300);let e=await s(t.selector,t.nth);e&&(await l.mouse.move(e.cx,e.cy),await l.waitFor(300))}else if("elehover"===t.mode)await l.waitFor(300),await l.hover(t.selector),await l.waitFor(300);else if("drag"===t.mode)await l.waitFor(300),await l.mouse.move(t.x1,t.y1),await l.mouse.down(),await l.waitFor(300),await l.mouse.move(t.x2,t.y2,{steps:50}),await l.waitFor(300),await l.mouse.up(),await l.waitFor(300);else if("eledrag"===t.mode){await l.waitFor(300);let e=await s(t.selector,t.nth);e&&(await l.mouse.move(e.cx,e.cy),await l.mouse.down(),await l.waitFor(300),await l.mouse.move(e.cx+t.shiftx,e.cy+t.shifty,{steps:50}),await l.waitFor(300),await l.mouse.up(),await l.waitFor(300))}else if("click"===t.mode)await l.waitFor(300),await l.mouse.move(t.x1,t.y1),await l.mouse.down(),await l.mouse.up(),await l.waitFor(300);else if("eleclick"===t.mode){await l.waitFor(300);let e=await s(t.selector,t.nth);e&&(await e.ele.click(),await l.waitFor(300))}else if("dbclick"===t.mode)await l.waitFor(300),await l.mouse.click(t.x1,t.y1,{clickCount:2}),await l.waitFor(300);else if("eledbclick"===t.mode){await l.waitFor(300);let e=await s(t.selector,t.nth);e&&(await e.ele.click({clickCount:2}),await l.waitFor(300))}else if("type"===t.mode)await l.waitFor(300),await l.keyboard.type(t.str,{delay:50}),t.noEnter||await l.keyboard.type(String.fromCharCode(13)),await l.waitFor(300);else if("eletype"===t.mode){await l.waitFor(300);let e=await s(t.selector,t.nth);e&&(await e.ele.click(),await l.waitFor(50),await l.keyboard.type(t.str,{delay:50}),t.noEnter||await l.keyboard.type(String.fromCharCode(13)),await l.waitFor(300))}else if("keypress"===t.mode){await l.waitFor(300);let e=Nt(t.count);e<=0&&(e=1);for(let r=0;r<e;r++)await l.keyboard.press(t.key);await l.waitFor(300)}else if("elefocus"===t.mode){await l.waitFor(300);let e=await s(t.selector,t.nth);e&&(await e.ele.focus(),await l.waitFor(300))}else console.log("mode is unrecognized: "+t.mode)})),await l.waitFor(2e3);let f=await l.screenshot({encoding:"base64"});return await l.close(),await c.close(),f}return async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=vt(r,"headless"),o=vt(r,"viewport"),i=vt(r,"waitsec"),a=10;var u;return zt(u=r.num_web)&&Nt(u)>0&&(a=Nt(r.num_web)),function(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n={},o=!1,i=ur();if(!cr(t)&&!lr(t))return i.reject("rs is not an array or object"),i;let a=!1;if(lr(t)){a=!0;let e=[];xe(t,((t,r)=>{e.push({k:r,v:t})})),t=e}let u=hr(r);return u.on("message",(function(r){if(o)return;let c,l=u.get();if(sr(e)){let t=l.key,r=l.value;a&&(t=l.value.k,r=l.value.v),c=e(r,t)}else c=l.value;c.then((t=>{n[l.key]=t})).catch((t=>{o=!0,u.clear(),i.reject(t)})).finally((()=>{u.cb(),ir(n)===t.length&&i.resolve(ar(n))}))})),xe(t,((t,e)=>{u.push({key:e,value:t})})),i}(e,(async function(e){console.log("expBuild: "+e.name);let r={headless:n,viewport:o,actions:e.actions,waitsec:i},a=await br(e.url,r);e.fn_png&&t.writeFileSync(e.fn_png,a,"base64"),e.fn_base64&&t.writeFileSync(e.fn_base64,a,"utf8"),console.log("success: "+e.name)}),a).then((()=>{console.log("[32m%s[0m","expBuild success")})).catch((t=>{console.log("[31m%s[0m","expBuild error: "+t)}))}}));
//# sourceMappingURL=expBuild.umd.js.map
