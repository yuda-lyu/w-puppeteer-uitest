/*!
 * exp v1.0.25
 * (c) 2018-2019 yuda-lyu(semisphere)
 * Released under the MIT License.
 */(function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("fs"),require("bluebird"),require("puppeteer"),require("jimp"),require("json5")):"function"==typeof define&&define.amd?define(["exports","fs","bluebird","puppeteer","jimp","json5"],t):(e=e||self,t(e.exp={},e.fs,e.bluebird,e.puppeteer,e.jimp,e.json5))})(this,function(e,t,n,o,r,a){'use strict';function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function l(e,t){return t={exports:{}},e(t,t.exports),t.exports}function p(e,t,n,o,r,a,i){try{var l=e[a](i),p=l.value}catch(e){return void n(e)}l.done?t(p):Promise.resolve(p).then(o,r)}function s(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function c(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":$e&&$e in Object(e)?Pe(e):Ne(e)}function d(e){var t=i(e);return null!=e&&("object"==t||"function"==t)}function u(e){return!!De&&De in e}function y(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function x(e){var t=i(e);return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function h(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function g(e){var t=this.__data__=new _e(e);this.size=t.size}function m(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new ut;++t<n;)this.add(e[t])}function f(e){return null!=e&&"object"==i(e)}function _(e,t){var n=i(e);return t=null==t?9007199254740991:t,!!t&&("number"==n||"symbol"!=n&&Vt.test(e))&&-1<e&&0==e%1&&e<t}function w(e,t,n,o,r,a){var i=1&n,l=sn(e),p=l.length,s=sn(t),c=s.length;if(p!=c&&!i)return!1;for(var d,u=p;u--;)if(d=l[u],i?!(d in t):!dn.call(t,d))return!1;var y=a.get(e);if(y&&a.get(t))return y==t;var x=!0;a.set(e,t),a.set(t,e);for(var h=i;++u<p;){d=l[u];var g=e[d],m=t[d];if(o)var b=i?o(m,g,d,t,e,a):o(g,m,d,e,t,a);if(void 0===b?!(g===m||r(g,m,n,o,a)):!b){x=!1;break}h||(h="constructor"==d)}if(x&&!h){var f=e.constructor,_=t.constructor;f!=_&&"constructor"in e&&"constructor"in t&&!("function"==typeof f&&f instanceof f&&"function"==typeof _&&_ instanceof _)&&(x=!1)}return a["delete"](e),a["delete"](t),x}function j(e,t,n,o,r){return!(e!==t)||(null!=e&&null!=t&&(Bt(e)||Bt(t))?Bn(e,t,n,o,j,r):e!==e&&t!==t)}function v(e,t,n,o){var r=n.length,a=r,i=!o;if(null==e)return!a;for(e=Object(e);r--;){var l=n[r];if(i&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++r<a;){l=n[r];var p=l[0],s=e[p],c=l[1];if(!(i&&l[2])){var d=new yt;if(o)var u=o(s,c,p,e,t,d);if(void 0===u?!Nn(c,s,3,o,d):!u)return!1}else if(void 0===s&&!(p in e))return!1}return!0}function k(e){return"symbol"==i(e)||Bt(e)&&Ie(e)=="[object Symbol]"}function S(e,t){if(Ft(e))return!1;var n=i(e);return!!("number"==n||"symbol"==n||"boolean"==n||null==e||Cn(e))||Dn.test(e)||!Un.test(e)||null!=t&&e in Object(t)}function F(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function n(){var o=arguments,r=t?t.apply(this,o):o[0],a=n.cache;if(a.has(r))return a.get(r);var i=e.apply(this,o);return n.cache=a.set(r,i)||a,i};return n.cache=new(F.Cache||ut),n}function O(e){if("string"==typeof e)return e;if(Ft(e))return he(e,O)+"";if(Cn(e))return Xn?Xn.call(e):"";var t=e+"";return"0"==t&&1/e==-qn?"-0":t}function L(e,t){return null!=e&&t in Object(e)}function E(e){return"function"==typeof e?e:null==e?ro:"object"==i(e)?Ft(e)?oo(e[0],e[1]):Mn(e):lo(e)}function z(e){var t=Object.prototype.toString.call(e);return"[object String]"===t}function A(e){return!!(z(e)&&""!==e)}function P(e){var t=Object.prototype.toString.call(e);return"[object Number]"===t}function T(e){var t=!1;return A(e)?t=!isNaN(+e):P(e)&&(t=!0),t}function B(e){if(!T(e))return 0;var t=wo(e);return t}function N(e){return!!T(e)&&(e=B(e),vo(e))}function $(e){if(!T(e))return 0;e=B(e);var t=Oo(e);return"0"===t+""?0:t}function I(e){if(!N(e))return!1;var t=0<$(e);return t}function G(e){var t=Object.prototype.toString.call(e);return"[object Object]"===t}function M(e){var t=Object.prototype.toString.call(e);return"[object Array]"===t}function C(e){return Lo(e)}function U(e){var t=Object.prototype.toString.call(e);return"[object Undefined]"===t}function D(e){var t=Object.prototype.toString.call(e);return"[object Null]"===t}function V(e){if(G(e)){for(var t in e)return!1;return!0}return!1}function R(e){return!!(z(e)&&""===e)}function W(e){return!!M(e)&&0===e.length}function Y(e){return!!U(e)||!!D(e)||!!V(e)||!!R(e)||!!W(e)}function q(){return K.apply(this,arguments)}function K(){return K=xe(ye.mark(function e(t){var r,a,i,l,p,s,c,d,u,y,x,h=arguments;return ye.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y=function(){return y=xe(ye.mark(function e(t){var o,a,i,l,p=arguments;return ye.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=1<p.length&&void 0!==p[1]?p[1]:0,o=$(o),0!==o){e.next=11;break}return e.next=5,d.$(t);case 5:if(a=e.sent,!Y(a)){e.next=9;break}return console.log("page.$ get no result: "+t),e.abrupt("return",null);case 9:e.next=18;break;case 11:return e.next=13,d.$$(t);case 13:if(i=e.sent,0!==i.length){e.next=17;break}return console.log("page.$$ get no result: "+t),e.abrupt("return",null);case 17:a=0>o?i[i.length+o]:i[o];case 18:if(!Y(a)){e.next=21;break}return console.log("invalid ele: "+t),e.abrupt("return",null);case 21:if(!Y(a.boundingBox)){e.next=24;break}return console.log("invalid ele.boundingBox: "+t),e.abrupt("return",null);case 24:return e.next=26,a.boundingBox();case 26:return l=e.sent,l.cx=l.x+l.width/2,l.cy=l.y+l.height/2,l.ele=a,e.abrupt("return",l);case 31:case"end":return e.stop();}},e)})),y.apply(this,arguments)},u=function(){return y.apply(this,arguments)},r=1<h.length&&void 0!==h[1]?h[1]:{},a=eo(r,"headless"),C(a)||(a=!0),i=eo(r,"viewport"),G(i)||(i={x:0,y:0,width:800,height:600}),l=eo(r,"actions"),M(l)||(l=[]),p=eo(r,"waitsec"),N(p)||(p=5),s={headless:a,slowMo:20},e.next=14,o.launch(s);case 14:return c=e.sent,e.next=17,c.newPage();case 17:return d=e.sent,e.next=20,d.goto(t);case 20:return e.next=22,d.setViewport(i);case 22:return e.next=24,d.waitFor(1e3*p);case 24:return e.next=26,n.mapSeries(l,function(){var e=xe(ye.mark(function e(t){var n,o,a,l,p,s,c,y;return ye.wrap(function(e){var r=String.fromCharCode;for(;;)switch(e.prev=e.next){case 0:if("wait"!==t.mode){e.next=5;break}return e.next=3,d.waitFor(t.time);case 3:e.next=197;break;case 5:if("resize"!==t.mode){e.next=14;break}return e.next=8,d.waitFor(300);case 8:return e.next=10,d.setViewport({x:0,y:0,width:t.width,height:t.height});case 10:return e.next=12,d.waitFor(300);case 12:e.next=197;break;case 14:if("move"!==t.mode){e.next=23;break}return e.next=17,d.waitFor(300);case 17:return e.next=19,d.mouse.move(t.x1,t.y1);case 19:return e.next=21,d.waitFor(300);case 21:e.next=197;break;case 23:if("elemove"!==t.mode){e.next=36;break}return e.next=26,d.waitFor(300);case 26:return e.next=28,u(t.selector,t.nth);case 28:if(n=e.sent,!n){e.next=34;break}return e.next=32,d.mouse.move(n.cx,n.cy);case 32:return e.next=34,d.waitFor(300);case 34:e.next=197;break;case 36:if("elehover"!==t.mode){e.next=45;break}return e.next=39,d.waitFor(300);case 39:return e.next=41,d.hover(t.selector);case 41:return e.next=43,d.waitFor(300);case 43:e.next=197;break;case 45:if("drag"!==t.mode){e.next=64;break}return e.next=48,d.waitFor(300);case 48:return e.next=50,d.mouse.move(t.x1,t.y1);case 50:return e.next=52,d.mouse.down();case 52:return e.next=54,d.waitFor(300);case 54:return e.next=56,d.mouse.move(t.x2,t.y2,{steps:50});case 56:return e.next=58,d.waitFor(300);case 58:return e.next=60,d.mouse.up();case 60:return e.next=62,d.waitFor(300);case 62:e.next=197;break;case 64:if("eledrag"!==t.mode){e.next=87;break}return e.next=67,d.waitFor(300);case 67:return e.next=69,u(t.selector,t.nth);case 69:if(o=e.sent,!o){e.next=85;break}return e.next=73,d.mouse.move(o.cx,o.cy);case 73:return e.next=75,d.mouse.down();case 75:return e.next=77,d.waitFor(300);case 77:return e.next=79,d.mouse.move(o.cx+t.shiftx,o.cy+t.shifty,{steps:50});case 79:return e.next=81,d.waitFor(300);case 81:return e.next=83,d.mouse.up();case 83:return e.next=85,d.waitFor(300);case 85:e.next=197;break;case 87:if("click"!==t.mode){e.next=100;break}return e.next=90,d.waitFor(300);case 90:return e.next=92,d.mouse.move(t.x1,t.y1);case 92:return e.next=94,d.mouse.down();case 94:return e.next=96,d.mouse.up();case 96:return e.next=98,d.waitFor(300);case 98:e.next=197;break;case 100:if("eleclick"!==t.mode){e.next=113;break}return e.next=103,d.waitFor(300);case 103:return e.next=105,u(t.selector,t.nth);case 105:if(a=e.sent,!a){e.next=111;break}return e.next=109,a.ele.click();case 109:return e.next=111,d.waitFor(300);case 111:e.next=197;break;case 113:if("dbclick"!==t.mode){e.next=122;break}return e.next=116,d.waitFor(300);case 116:return e.next=118,d.mouse.click(t.x1,t.y1,{clickCount:2});case 118:return e.next=120,d.waitFor(300);case 120:e.next=197;break;case 122:if("eledbclick"!==t.mode){e.next=135;break}return e.next=125,d.waitFor(300);case 125:return e.next=127,u(t.selector,t.nth);case 127:if(l=e.sent,!l){e.next=133;break}return e.next=131,l.ele.click({clickCount:2});case 131:return e.next=133,d.waitFor(300);case 133:e.next=197;break;case 135:if("type"!==t.mode){e.next=147;break}return e.next=138,d.waitFor(300);case 138:return e.next=140,d.keyboard.type(t.str,{delay:50});case 140:if(t.noEnter){e.next=143;break}return e.next=143,d.keyboard.type(r(13));case 143:return e.next=145,d.waitFor(300);case 145:e.next=197;break;case 147:if("eletype"!==t.mode){e.next=167;break}return e.next=150,d.waitFor(300);case 150:return e.next=152,u(t.selector,t.nth);case 152:if(p=e.sent,!p){e.next=165;break}return e.next=156,p.ele.click();case 156:return e.next=158,d.waitFor(50);case 158:return e.next=160,d.keyboard.type(t.str,{delay:50});case 160:if(t.noEnter){e.next=163;break}return e.next=163,d.keyboard.type(r(13));case 163:return e.next=165,d.waitFor(300);case 165:e.next=197;break;case 167:if("keypress"!==t.mode){e.next=183;break}return e.next=170,d.waitFor(300);case 170:s=$(t.count),0>=s&&(s=1),c=0;case 173:if(!(c<s)){e.next=179;break}return e.next=176,d.keyboard.press(t.key);case 176:c++,e.next=173;break;case 179:return e.next=181,d.waitFor(300);case 181:e.next=197;break;case 183:if("elefocus"!==t.mode){e.next=196;break}return e.next=186,d.waitFor(300);case 186:return e.next=188,u(t.selector,t.nth);case 188:if(y=e.sent,!y){e.next=194;break}return e.next=192,y.ele.focus();case 192:return e.next=194,d.waitFor(300);case 194:e.next=197;break;case 196:console.log("mode is unrecognized: "+t.mode);case 197:case"end":return e.stop();}},e)}));return function(){return e.apply(this,arguments)}}());case 26:return e.next=28,d.waitFor(2e3);case 28:return e.next=30,d.screenshot({encoding:"base64"});case 30:return x=e.sent,e.next=33,d.close();case 33:return e.next=35,c.close();case 35:return e.abrupt("return",x);case 36:case"end":return e.stop();}},e)})),K.apply(this,arguments)}function X(){return Q.apply(this,arguments)}function Q(){return Q=xe(ye.mark(function e(o){var r,a,i,l,p,s=arguments;return ye.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=1<s.length&&void 0!==s[1]?s[1]:{},a=eo(r,"headless"),i=eo(r,"viewport"),l=eo(r,"waitsec"),p=10,I(r.num_web)&&(p=$(r.num_web)),e.abrupt("return",n.map(o,function(){var e=xe(ye.mark(function e(n){var o,r;return ye.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("expBuild: "+n.name),o={headless:a,viewport:i,actions:n.actions,waitsec:l},e.next=4,q(n.url,o);case 4:r=e.sent,n.fn_png&&t.writeFileSync(n.fn_png,r,"base64"),n.fn_base64&&t.writeFileSync(n.fn_base64,r,"utf8"),console.log("success: "+n.name);case 8:case"end":return e.stop();}},e)}));return function(){return e.apply(this,arguments)}}(),{concurrency:p}).then(function(){console.log("\x1B[32m%s\x1B[0m","expBuild success")})["catch"](function(e){console.log("\x1B[31m%s\x1B[0m","expBuild error: "+e)}));case 7:case"end":return e.stop();}},e)})),Q.apply(this,arguments)}function Z(e,t){var o=Math.pow,a=Math.abs;if(e.length!==t.length)return 0;for(var l,p=0,s=e.length,n=0,c=e.length;n<c;n++)l=a(e[n]-t[n]),p+=l/255;return p=1-o(p/s,1/3),p}function H(){return J.apply(this,arguments)}function J(){return J=xe(ye.mark(function e(t){var n,o;return ye.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Buffer.from(t,"base64"),e.next=3,r.read(n);case 3:return o=e.sent,e.abrupt("return",o.bitmap.data);case 5:case"end":return e.stop();}},e)})),J.apply(this,arguments)}function ee(){return te.apply(this,arguments)}function te(){return te=xe(ye.mark(function e(t,n){var o,r;return ye.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H(t);case 2:return o=e.sent,e.next=5,H(n);case 5:return r=e.sent,e.abrupt("return",Z(o,r));case 7:case"end":return e.stop();}},e)})),te.apply(this,arguments)}function ne(){return oe.apply(this,arguments)}function oe(){return oe=xe(ye.mark(function e(o){var r,a,i,l,p,c,d,u=arguments;return ye.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=1<u.length&&void 0!==u[1]?u[1]:{},a=eo(r,"headless"),i=eo(r,"viewport"),l=eo(r,"waitsec"),p=10,I(r.num_web)&&(p=$(r.num_web)),c=1,T(r.ratio_similar)&&(c=B(r.ratio_similar)),d=!1,e.abrupt("return",n.map(o,function(){var e=xe(ye.mark(function e(n){var o,p,u,y,x,h;return ye.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("expTest: "+n.name),o={headless:a,viewport:i,actions:n.actions,waitsec:l},e.next=4,q(n.url,o);case 4:if(p=e.sent,u=t.readFileSync(n.fn_base64,"utf8"),1!==c){e.next=10;break}y=p===u,e.next=16;break;case 10:return e.next=12,ee(p,u);case 12:x=e.sent,y=x>=c,h=y?" >= ":"<",console.log("ratio[".concat(x,"] ").concat(h," ratio_similar[").concat(c,"]"));case 16:if(!y){e.next=20;break}d||console.log("success: "+n.name),e.next=23;break;case 20:return d||(console.log("error: "+n.name),t.writeFileSync(n.name+".err.png",p,"base64")),d=!0,e.abrupt("return",Promise.reject(n.name));case 23:return e.abrupt("return",n.name);case 24:case"end":return e.stop();}},e)}));return function(){return e.apply(this,arguments)}}(),{concurrency:p}).then(function(){console.log("\x1B[32m%s\x1B[0m","expTest success")})["catch"](function(e){console.log("\x1B[31m%s\x1B[0m","expTest error: "+e)}));case 10:case"end":return e.stop();}},e)})),oe.apply(this,arguments)}function re(){return ae.apply(this,arguments)}function ae(){return ae=xe(ye.mark(function e(n){var o,r,a,i=arguments;return ye.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=1<i.length&&void 0!==i[1]?i[1]:"",r=t.promises,e.next=4,r.readdir(n);case 4:return a=e.sent,""!==o&&(a=a.filter(function(e){return 0<=e.indexOf(o)})),e.abrupt("return",a);case 7:case"end":return e.stop();}},e)})),ae.apply(this,arguments)}function ie(e){var n=t.readFileSync(e,"utf8");return a.parse(n)}function le(){return pe.apply(this,arguments)}function pe(){return pe=xe(ye.mark(function e(n,o,r,a){var i,l;return ye.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.existsSync(n)){e.next=3;break}return console.log("build: folder not exits: ",n),e.abrupt("return");case 3:if(Me(o)){e.next=7;break}if(t.existsSync(o)){e.next=7;break}return console.log("build: folder not exits: ",o),e.abrupt("return");case 7:return t.existsSync(r)||t.mkdirSync(r),e.next=10,re(n,".html");case 10:return i=e.sent,Me(a.htmlFilter)&&(i=a.htmlFilter(i)),l=uo(i,function(e){var t=e.replace(".html",""),a={name:t,actions:[],url:n+e,fn_png:r+t+".png",fn_base64:r+t+".base64"};return a.actions=Me(o)?o(t):ie(o+t+".action.json"),a}),e.next=15,X(l,a);case 15:case"end":return e.stop();}},e)})),pe.apply(this,arguments)}function se(){return ce.apply(this,arguments)}function ce(){return ce=xe(ye.mark(function e(n,o,r,a){var i,l;return ye.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.existsSync(n)){e.next=3;break}return console.log("test: folder not exits: ",n),e.abrupt("return");case 3:if(Me(o)){e.next=7;break}if(t.existsSync(o)){e.next=7;break}return console.log("build: folder not exits: ",o),e.abrupt("return");case 7:if(t.existsSync(r)){e.next=10;break}return console.log("test: folder not exits: ",r),e.abrupt("return");case 10:return e.next=12,re(n,".html");case 12:return i=e.sent,Me(a.htmlFilter)&&(i=a.htmlFilter(i)),l=uo(i,function(e){var t=e.replace(".html",""),a={name:t,actions:[],url:n+e,fn_base64:r+t+".base64"};return a.actions=Me(o)?o(t):ie(o+t+".action.json"),a}),e.next=17,ne(l,a);case 17:case"end":return e.stop();}},e)})),ce.apply(this,arguments)}t=t&&t.hasOwnProperty("default")?t["default"]:t,n=n&&n.hasOwnProperty("default")?n["default"]:n,o=o&&o.hasOwnProperty("default")?o["default"]:o,r=r&&r.hasOwnProperty("default")?r["default"]:r,a=a&&a.hasOwnProperty("default")?a["default"]:a;var de="undefined"==typeof globalThis?"undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?{}:self:global:window:globalThis,ue=l(function(e){var t=function(e){function t(e,t,n,r){var a=t&&t.prototype instanceof o?t:o,i=Object.create(a.prototype),l=new y(r||[]);return i._invoke=s(e,n,l),i}function n(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function o(){}function r(){}function a(){}function l(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function p(e){function t(o,r,a,l){var p=n(e[o],e,r);if("throw"===p.type)l(p.arg);else{var s=p.arg,c=s.value;return c&&"object"===i(c)&&b.call(c,"__await")?Promise.resolve(c.__await).then(function(e){t("next",e,a,l)},function(e){t("throw",e,a,l)}):Promise.resolve(c).then(function(e){s.value=e,a(s)},function(e){return t("throw",e,a,l)})}}function o(e,n){function o(){return new Promise(function(o,r){t(e,n,o,r)})}return r=r?r.then(o,o):o()}var r;this._invoke=o}function s(e,t,o){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return h()}for(o.method=a,o.arg=i;;){var l=o.delegate;if(l){var p=c(l,o);if(p){if(p===v)continue;return p}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if("suspendedStart"===r)throw r="completed",o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);r="executing";var s=n(e,t,o);if("normal"===s.type){if(r=o.done?"completed":"suspendedYield",s.arg===v)continue;return{value:s.arg,done:o.done}}"throw"===s.type&&(r="completed",o.method="throw",o.arg=s.arg)}}}function c(e,t){var o=e.iterator[t.method];if(o===g){if(t.delegate=null,"throw"===t.method){if(e.iterator["return"]&&(t.method="return",t.arg=g,c(e,t),"throw"===t.method))return v;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var r=n(o,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,v;var a=r.arg;if(!a)return t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,v;if(a.done)t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=g);else return a;return t.delegate=null,v}function d(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function u(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function y(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(d,this),this.reset(!0)}function x(e){if(e){var t=e[_];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(b.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=g,t.done=!0,t};return o.next=o}}return{next:h}}function h(){return{value:g,done:!0}}var g,m=Object.prototype,b=m.hasOwnProperty,f="function"==typeof Symbol?Symbol:{},_=f.iterator||"@@iterator",w=f.asyncIterator||"@@asyncIterator",j=f.toStringTag||"@@toStringTag";e.wrap=t;var v={},k={};k[_]=function(){return this};var S=Object.getPrototypeOf,F=S&&S(S(x([])));F&&F!==m&&b.call(F,_)&&(k=F);var O=a.prototype=o.prototype=Object.create(k);return r.prototype=O.constructor=a,a.constructor=r,a[j]=r.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===r||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,a):(e.__proto__=a,!(j in e)&&(e[j]="GeneratorFunction")),e.prototype=Object.create(O),e},e.awrap=function(e){return{__await:e}},l(p.prototype),p.prototype[w]=function(){return this},e.AsyncIterator=p,e.async=function(n,o,r,a){var i=new p(t(n,o,r,a));return e.isGeneratorFunction(o)?i:i.next().then(function(e){return e.done?e.value:i.next()})},l(O),O[j]="Generator",O[_]=function(){return this},O.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var o=t.pop();if(o in e)return n.value=o,n.done=!1,n}return n.done=!0,n}},e.values=x,y.prototype={constructor:y,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=g,this.done=!1,this.delegate=null,this.method="next",this.arg=g,this.tryEntries.forEach(u),!e)for(var t in this)"t"===t.charAt(0)&&b.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=g)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,o){return a.type="throw",a.arg=e,n.next=t,o&&(n.method="next",n.arg=g),!!o}if(this.done)throw e;for(var n=this,o=this.tryEntries.length-1;0<=o;--o){var r=this.tryEntries[o],a=r.completion;if("root"===r.tryLoc)return t("end");if(r.tryLoc<=this.prev){var l=b.call(r,"catchLoc"),p=b.call(r,"finallyLoc");if(l&&p){if(this.prev<r.catchLoc)return t(r.catchLoc,!0);if(this.prev<r.finallyLoc)return t(r.finallyLoc)}else if(l){if(this.prev<r.catchLoc)return t(r.catchLoc,!0);}else if(!p)throw new Error("try statement without catch or finally");else if(this.prev<r.finallyLoc)return t(r.finallyLoc)}}},abrupt:function(e,t){for(var n,o=this.tryEntries.length-1;0<=o;--o)if(n=this.tryEntries[o],n.tryLoc<=this.prev&&b.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var r=n;break}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=e,a.arg=t,r?(this.method="next",this.next=r.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t,n=this.tryEntries.length-1;0<=n;--n)if(t=this.tryEntries[n],t.finallyLoc===e)return this.complete(t.completion,t.afterLoc),u(t),v},catch:function(e){for(var t,n=this.tryEntries.length-1;0<=n;--n)if(t=this.tryEntries[n],t.tryLoc===e){var o=t.completion;if("throw"===o.type){var r=o.arg;u(t)}return r}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=g),v}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}}),ye=ue,xe=function(e){return function(){var t=this,n=arguments;return new Promise(function(o,r){function a(e){p(l,o,r,a,i,"next",e)}function i(e){p(l,o,r,a,i,"throw",e)}var l=e.apply(t,n);a(void 0)})}},he=function(e,t){for(var n=-1,o=null==e?0:e.length,r=Array(o);++n<o;)r[n]=t(e[n],n,e);return r},ge=function(e,t){return e===t||e!==e&&t!==t},me=function(e,t){for(var n=e.length;n--;)if(ge(e[n][0],t))return n;return-1},be=Array.prototype,fe=be.splice;s.prototype.clear=function(){this.__data__=[],this.size=0},s.prototype["delete"]=function(e){var t=this.__data__,n=me(t,e);if(0>n)return!1;var o=t.length-1;return n==o?t.pop():fe.call(t,n,1),--this.size,!0},s.prototype.get=function(e){var t=this.__data__,n=me(t,e);return 0>n?void 0:t[n][1]},s.prototype.has=function(e){return-1<me(this.__data__,e)},s.prototype.set=function(e,t){var n=this.__data__,o=me(n,e);return 0>o?(++this.size,n.push([e,t])):n[o][1]=t,this};var _e=s,we="object"==i(de)&&de&&de.Object===Object&&de,je=we,ve="object"==("undefined"==typeof self?"undefined":i(self))&&self&&self.Object===Object&&self,ke=je||ve||Function("return this")(),Se=ke,Fe=Se.Symbol,Oe=Fe,Le=Object.prototype,Ee=Le.hasOwnProperty,ze=Le.toString,Ae=Oe?Oe.toStringTag:void 0,Pe=function(e){var t=Ee.call(e,Ae),n=e[Ae];try{e[Ae]=void 0;var o=!0}catch(t){}var r=ze.call(e);return o&&(t?e[Ae]=n:delete e[Ae]),r},Te=Object.prototype,Be=Te.toString,Ne=function(e){return Be.call(e)},$e=Oe?Oe.toStringTag:void 0,Ie=c,Ge=d,Me=function(e){if(!Ge(e))return!1;var t=Ie(e);return t=="[object Function]"||t=="[object GeneratorFunction]"||t=="[object AsyncFunction]"||t=="[object Proxy]"},Ce=Se["__core-js_shared__"],Ue=Ce,De=function(){var e=/[^.]+$/.exec(Ue&&Ue.keys&&Ue.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Ve=Function.prototype,Re=Ve.toString,We=function(e){if(null!=e){try{return Re.call(e)}catch(t){}try{return e+""}catch(t){}}return""},Ye=/[\\^$.*+?()[\]{}|]/g,qe=/^\[object .+?Constructor\]$/,Ke=Function.prototype,Xe=Object.prototype,Qe=Ke.toString,Ze=Xe.hasOwnProperty,He=RegExp("^"+Qe.call(Ze).replace(Ye,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Je=function(e){if(!Ge(e)||u(e))return!1;var t=Me(e)?He:qe;return t.test(We(e))},et=function(e,t){return null==e?void 0:e[t]},tt=function(e,t){var n=et(e,t);return Je(n)?n:void 0},nt=tt(Se,"Map"),ot=nt,rt=tt(Object,"create"),at=rt,it=Object.prototype,lt=it.hasOwnProperty,pt=Object.prototype,st=pt.hasOwnProperty;y.prototype.clear=function(){this.__data__=at?at(null):{},this.size=0},y.prototype["delete"]=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},y.prototype.get=function(e){var t=this.__data__;if(at){var n=t[e];return n==="__lodash_hash_undefined__"?void 0:n}return lt.call(t,e)?t[e]:void 0},y.prototype.has=function(e){var t=this.__data__;return at?t[e]!==void 0:st.call(t,e)},y.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=at&&void 0===t?"__lodash_hash_undefined__":t,this};var ct=y,dt=function(e,t){var n=e.__data__;return x(t)?n["string"==typeof t?"string":"hash"]:n.map};h.prototype.clear=function(){this.size=0,this.__data__={hash:new ct,map:new(ot||_e),string:new ct}},h.prototype["delete"]=function(e){var t=dt(this,e)["delete"](e);return this.size-=t?1:0,t},h.prototype.get=function(e){return dt(this,e).get(e)},h.prototype.has=function(e){return dt(this,e).has(e)},h.prototype.set=function(e,t){var n=dt(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this};var ut=h;g.prototype.clear=function(){this.__data__=new _e,this.size=0},g.prototype["delete"]=function(e){var t=this.__data__,n=t["delete"](e);return this.size=t.size,n},g.prototype.get=function(e){return this.__data__.get(e)},g.prototype.has=function(e){return this.__data__.has(e)},g.prototype.set=function(e,t){var n=this.__data__;if(n instanceof _e){var o=n.__data__;if(!ot||199>o.length)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new ut(o)}return n.set(e,t),this.size=n.size,this};var yt=g;m.prototype.add=m.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},m.prototype.has=function(e){return this.__data__.has(e)};var xt=function(e,t){for(var n=-1,o=null==e?0:e.length;++n<o;)if(t(e[n],n,e))return!0;return!1},ht=function(e,t){return e.has(t)},gt=function(e,t,n,o,r,a){var i=1&n,l=e.length,p=t.length;if(l!=p&&!(i&&p>l))return!1;var s=a.get(e);if(s&&a.get(t))return s==t;var c=-1,d=!0,u=2&n?new m:void 0;for(a.set(e,t),a.set(t,e);++c<l;){var y=e[c],x=t[c];if(o)var h=i?o(x,y,c,t,e,a):o(y,x,c,e,t,a);if(void 0!==h){if(h)continue;d=!1;break}if(u){if(!xt(t,function(e,t){if(!ht(u,t)&&(y===e||r(y,e,n,o,a)))return u.push(t)})){d=!1;break}}else if(!(y===x||r(y,x,n,o,a))){d=!1;break}}return a["delete"](e),a["delete"](t),d},mt=Se.Uint8Array,bt=mt,ft=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e,o){n[++t]=[o,e]}),n},_t=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n},wt=Oe?Oe.prototype:void 0,jt=wt?wt.valueOf:void 0,vt=function(e,t,n,o,r,a,i){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!!(e.byteLength==t.byteLength&&a(new bt(e),new bt(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return ge(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var l=ft;case"[object Set]":var p=1&o;if(l||(l=_t),e.size!=t.size&&!p)return!1;var s=i.get(e);if(s)return s==t;o|=2,i.set(e,t);var c=gt(l(e),l(t),o,r,a,i);return i["delete"](e),c;case"[object Symbol]":if(jt)return jt.call(e)==jt.call(t);}return!1},kt=function(e,t){for(var n=-1,o=t.length,r=e.length;++n<o;)e[r+n]=t[n];return e},St=Array.isArray,Ft=St,Ot=function(e,t,n){var o=t(e);return Ft(e)?o:kt(o,n(e))},Lt=function(e,t){for(var n=-1,o=null==e?0:e.length,r=0,a=[];++n<o;){var i=e[n];t(i,n,e)&&(a[r++]=i)}return a},Et=Object.prototype,zt=Et.propertyIsEnumerable,At=Object.getOwnPropertySymbols,Pt=At?function(e){return null==e?[]:(e=Object(e),Lt(At(e),function(t){return zt.call(e,t)}))}:function(){return[]},Tt=function(e,t){for(var n=-1,o=Array(e);++n<e;)o[n]=t(n);return o},Bt=f,Nt=function(e){return Bt(e)&&Ie(e)=="[object Arguments]"},$t=Object.prototype,It=$t.hasOwnProperty,Gt=$t.propertyIsEnumerable,Mt=Nt(function(){return arguments}())?Nt:function(e){return Bt(e)&&It.call(e,"callee")&&!Gt.call(e,"callee")},Ct=Mt,Ut=function(){return!1},Dt=l(function(e,t){var n=t&&!t.nodeType&&t,o=n&&!0&&e&&!e.nodeType&&e,r=o&&o.exports===n,a=r?Se.Buffer:void 0,i=a?a.isBuffer:void 0;e.exports=i||Ut}),Vt=/^(?:0|[1-9]\d*)$/,Rt=_,Wt=function(e){return"number"==typeof e&&-1<e&&0==e%1&&e<=9007199254740991},Yt={};Yt["[object Float32Array]"]=Yt["[object Float64Array]"]=Yt["[object Int8Array]"]=Yt["[object Int16Array]"]=Yt["[object Int32Array]"]=Yt["[object Uint8Array]"]=Yt["[object Uint8ClampedArray]"]=Yt["[object Uint16Array]"]=Yt["[object Uint32Array]"]=!0,Yt["[object Arguments]"]=Yt["[object Array]"]=Yt["[object ArrayBuffer]"]=Yt["[object Boolean]"]=Yt["[object DataView]"]=Yt["[object Date]"]=Yt["[object Error]"]=Yt["[object Function]"]=Yt["[object Map]"]=Yt["[object Number]"]=Yt["[object Object]"]=Yt["[object RegExp]"]=Yt["[object Set]"]=Yt["[object String]"]=Yt["[object WeakMap]"]=!1;var qt=l(function(e,t){var n=t&&!t.nodeType&&t,o=n&&!0&&e&&!e.nodeType&&e,r=o&&o.exports===n,a=r&&je.process,i=function(){try{var e=o&&o.require&&o.require("util").types;return e?e:a&&a.binding&&a.binding("util")}catch(t){}}();e.exports=i}),Kt=qt&&qt.isTypedArray,Xt=Kt?function(e){return function(t){return e(t)}}(Kt):function(e){return Bt(e)&&Wt(e.length)&&!!Yt[Ie(e)]},Qt=Xt,Zt=Object.prototype,Ht=Zt.hasOwnProperty,Jt=function(e,t){var n=Ft(e),o=!n&&Ct(e),r=!n&&!o&&Dt(e),a=!n&&!o&&!r&&Qt(e),i=n||o||r||a,l=i?Tt(e.length,String):[],p=l.length;for(var s in e)(t||Ht.call(e,s))&&!(i&&("length"==s||r&&("offset"==s||"parent"==s)||a&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||Rt(s,p)))&&l.push(s);return l},en=Object.prototype,tn=function(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||en;return e===n},nn=function(e,t){return function(n){return e(t(n))}}(Object.keys,Object),on=Object.prototype,rn=on.hasOwnProperty,an=function(e){if(!tn(e))return nn(e);var t=[];for(var n in Object(e))rn.call(e,n)&&"constructor"!=n&&t.push(n);return t},ln=function(e){return null!=e&&Wt(e.length)&&!Me(e)},pn=function(e){return ln(e)?Jt(e):an(e)},sn=function(e){return Ot(e,pn,Pt)},cn=Object.prototype,dn=cn.hasOwnProperty,un=tt(Se,"DataView"),yn=un,xn=tt(Se,"Promise"),hn=xn,gn=tt(Se,"Set"),mn=gn,bn=tt(Se,"WeakMap"),fn=bn,_n="[object Map]",wn="[object Promise]",jn="[object Set]",vn="[object WeakMap]",kn="[object DataView]",Sn=We(yn),Fn=We(ot),On=We(hn),Ln=We(mn),En=We(fn),zn=Ie;(yn&&zn(new yn(new ArrayBuffer(1)))!=kn||ot&&zn(new ot)!=_n||hn&&zn(hn.resolve())!=wn||mn&&zn(new mn)!=jn||fn&&zn(new fn)!=vn)&&(zn=function(e){var t=Ie(e),n=t=="[object Object]"?e.constructor:void 0,o=n?We(n):"";if(o)switch(o){case Sn:return kn;case Fn:return _n;case On:return wn;case Ln:return jn;case En:return vn;}return t});var An=zn,Pn=Object.prototype,Tn=Pn.hasOwnProperty,Bn=function(e,t,n,o,r,a){var i=Ft(e),l=Ft(t),p=i?"[object Array]":An(e),s=l?"[object Array]":An(t);p="[object Arguments]"==p?"[object Object]":p,s="[object Arguments]"==s?"[object Object]":s;var c="[object Object]"==p,d="[object Object]"==s,u=p==s;if(u&&Dt(e)){if(!Dt(t))return!1;i=!0,c=!1}if(u&&!c)return a||(a=new yt),i||Qt(e)?gt(e,t,n,o,r,a):vt(e,t,p,n,o,r,a);if(!(1&n)){var y=c&&Tn.call(e,"__wrapped__"),x=d&&Tn.call(t,"__wrapped__");if(y||x){var h=y?e.value():e,g=x?t.value():t;return a||(a=new yt),r(h,g,n,o,a)}}return!!u&&(a||(a=new yt),w(e,t,n,o,r,a))},Nn=j,$n=function(e){return e===e&&!Ge(e)},In=function(e){for(var t=pn(e),n=t.length;n--;){var o=t[n],r=e[o];t[n]=[o,r,$n(r)]}return t},Gn=function(e,t){return function(n){return null!=n&&n[e]===t&&(t!==void 0||e in Object(n))}},Mn=function(e){var t=In(e);return 1==t.length&&t[0][2]?Gn(t[0][0],t[0][1]):function(n){return n===e||v(n,e,t)}},Cn=k,Un=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Dn=/^\w*$/,Vn=S;F.Cache=ut;var Rn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Wn=/\\(\\)?/g,Yn=function(e){var t=F(e,function(e){return 500===n.size&&n.clear(),e}),n=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Rn,function(e,n,o,r){t.push(o?r.replace(Wn,"$1"):n||e)}),t}),qn=1/0,Kn=Oe?Oe.prototype:void 0,Xn=Kn?Kn.toString:void 0,Qn=function(e){return null==e?"":O(e)},Zn=function(e,t){return Ft(e)?e:Vn(e,t)?[e]:Yn(Qn(e))},Hn=function(e){if("string"==typeof e||Cn(e))return e;var t=e+"";return"0"==t&&1/e==-(1/0)?"-0":t},Jn=function(e,t){t=Zn(t,e);for(var n=0,o=t.length;null!=e&&n<o;)e=e[Hn(t[n++])];return n&&n==o?e:void 0},eo=function(e,t,n){var o=null==e?void 0:Jn(e,t);return o===void 0?n:o},to=function(e,t,n){t=Zn(t,e);for(var o,r=-1,a=t.length,i=!1;++r<a&&(o=Hn(t[r]),!!(i=null!=e&&n(e,o)));)e=e[o];return i||++r!=a?i:(a=null==e?0:e.length,!!a&&Wt(a)&&Rt(o,a)&&(Ft(e)||Ct(e)))},no=function(e,t){return null!=e&&to(e,t,L)},oo=function(e,t){return Vn(e)&&$n(t)?Gn(Hn(e),t):function(n){var o=eo(n,e);return o===void 0&&o===t?no(n,e):Nn(t,o,3)}},ro=function(e){return e},ao=function(e){return function(t){return null==t?void 0:t[e]}},io=function(e){return function(t){return Jn(t,e)}},lo=function(e){return Vn(e)?ao(Hn(e)):io(e)},po=function(e){return function(t,n,o){for(var r=-1,a=Object(t),i=o(t),l=i.length;l--;){var p=i[e?l:++r];if(!1===n(a[p],p,a))break}return t}}(),so=function(e,t){return function(n,o){if(null==n)return n;if(!ln(n))return e(n,o);for(var r=n.length,a=t?r:-1,i=Object(n);(t?a--:++a<r)&&!(!1===o(i[a],a,i)););return n}}(function(e,t){return e&&po(e,t,pn)}),co=function(e,t){var n=-1,o=ln(e)?Array(e.length):[];return so(e,function(e,r,a){o[++n]=t(e,r,a)}),o},uo=function(e,t){var n=Ft(e)?he:co;return n(e,E(t))},yo=0/0,xo=/^\s+|\s+$/g,ho=/^[-+]0x[0-9a-f]+$/i,go=/^0b[01]+$/i,mo=/^0o[0-7]+$/i,bo=parseInt,fo=function(e){if("number"==typeof e)return e;if(Cn(e))return yo;if(Ge(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Ge(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(xo,"");var n=go.test(e);return n||mo.test(e)?bo(e.slice(2),n?2:8):ho.test(e)?yo:+e},_o=1/0,wo=function(e){if(!e)return 0===e?e:0;if(e=fo(e),e===_o||e===-_o){var t=0>e?-1:1;return 1.7976931348623157e+308*t}return e===e?e:0},jo=function(e){var t=wo(e),n=t%1;return t===t?n?t-n:t:0},vo=function(e){return"number"==typeof e&&e==jo(e)},ko=Se.isFinite,So=Math.min,Fo=function(e){var t=Math[e];return function(e,n){if(e=fo(e),n=null==n?0:So(jo(n),292),n&&ko(e)){var o=(Qn(e)+"e").split("e"),r=t(o[0]+"e"+(+o[1]+n));return o=(Qn(r)+"e").split("e"),+(o[0]+"e"+(+o[1]-n))}return t(e)}}("round"),Oo=Fo,Lo=function(e){return!0===e||!1===e||Bt(e)&&Ie(e)=="[object Boolean]"};e.build=le,e.test=se,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=exp.umd.js.map
